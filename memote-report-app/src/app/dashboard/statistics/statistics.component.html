<mat-card fxFlex>
  <mat-card-title>{{ module.moduleName }}</mat-card-title>
    <mat-card-content>
      <mat-accordion
      multi="true"
      displayMode="flat" >
         <mat-expansion-panel
         hideToggle="true"
         *ngFor="let test of module.testResults"
         #expPanel
         class="mat-elevation-z0">
          <mat-expansion-panel-header class="mat-expansion-panel-header">
            <mat-panel-description fxLayoutAlign="space-between start">
              <span> {{ test.title }} </span>
              <div [ngSwitch]="test.type">
                <span *ngSwitchCase="'length'">
                  {{ test.data.length | number : '1.'}}
                </span>
                <span *ngSwitchCase="'number'">
                  {{ test.metric | number : '1.2-2'}}
                </span>
                <div *ngSwitchCase="'object'">
                  Results inside!
                </div>
                <span *ngSwitchCase="'array'">
                  {{ test.data }}
                </span>
                <span *ngSwitchCase="'string'">
                  {{ test.data }}
                </span>
              </div>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div fxLayout='column' flexLayoutAlign='space-between center'>
          <div> {{ test.summary }} </div>
          <div *ngIf="test.type === 'object'; else rawData">
            <p></p>
            <app-tabularize [objectData]="test.data"></app-tabularize>
            <p></p>
            <textarea rows="4" style="overflow-wrap: break-word; width:100%">
            {{ data.getString(test.data) }}
            </textarea>
          </div>
          <ng-template #rawData>
            <p></p>
            <textarea rows="4" style="overflow-wrap: break-word; width:100%">
            {{ test.data }}
            </textarea>
          </ng-template>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-content>
  </mat-card>
